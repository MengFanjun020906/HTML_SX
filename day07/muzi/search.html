<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.css">
    <link rel="stylesheet" href="css/search.css">
    <title>search</title>
</head>

<body>
    <div class="search">
        <i class="fa  fa-angle-left fa-lg" onclick="goBack()"></i>

        <input type="text" placeholder="时间流逝">
        <button class="fa fa-close"></button>


    </div>
    <div class="nav-bar">
        <span class="active">综合</span>
        <span>单曲</span>
        <span>云村</span>
        <span>歌单</span>
        <span>歌手</span>
        <span>专辑</span>
    </div>

    <div class="box">
        <!-- 一个整体
        <div class="item">
            <div class="info">
                <div class="title">时间流逝</div>
                <div class="ps">
                    <span>原创</span>
                    <span>翻唱-胡老师</span>
                </div>
            </div>
            <img class="play" src="img/youtube.png" alt="">
            <i class="fa fa-ellipsis-v"></i>
        </div> -->
    </div>
    <br><br><br><br><br>
    <br><br><br><br><br>
    <br><br><br><br><br>
    <br><br><br><br><br>
    <script>
        // 1. 获取要搜索的内容
        // ?searchStr=你
        var url = location.search
        url = url.slice(1)
        var params = new URLSearchParams(url)

        console.log(params.get('searchStr'))
        var searchStr = params.get('searchStr')

        // 歌曲列表
        let songs = [{
                "sid": 1,
                "title": "TBD",
                "singer": "David",
                "cover": "img/song/615.jpg",
                "url": "audio/615.mp3"
            },
            {
                "sid": 2,
                "title": "出头天",
                "singer": "五月天",
                "cover": "img/song/618.jpg",
                "url": "audio/618.mp3"
            },
            {
                "sid": 3,
                "title": "刚刚好",
                "singer": "薛之谦",
                "cover": "img/song/781.jpg",
                "url": "audio/781.mp3"
            },
            {
                "sid": 4,
                "title": "你不是真正的快乐",
                "singer": "邓紫棋",
                "cover": "img/song/796.jpg",
                "url": "audio/796.mp3"
            },
            {
                "sid": 5,
                "title": "绅士",
                "singer": "薛之谦",
                "cover": "img/song/801.jpg",
                "url": "audio/801.mp3"
            },
            {
                "sid": 6,
                "title": "天外来物",
                "singer": "薛之谦",
                "cover": "img/song/805.jpg",
                "url": "audio/805.mp3"
            },
            {
                "sid": 7,
                "title": "突然好想你",
                "singer": "五月天",
                "cover": "img/song/809.jpg",
                "url": "audio/809.mp3"
            },
            {
                "sid": 8,
                "title": "我不愿让你一个人",
                "singer": "五月天",
                "cover": "img/song/813.jpg",
                "url": "audio/813.mp3"
            },
            {
                "sid": 9,
                "title": "我心中的尚未崩坏的地方",
                "singer": "五月天",
                "cover": "img/song/821.jpg",
                "url": "audio/821.mp3"
            },
            {
                "sid": 10,
                "title": "想见你想见你想见你",
                "singer": "八三夭",
                "cover": "img/song/900.jpg",
                "url": "audio/900.mp3"
            },
            {
                "sid": 11,
                "title": "像风一样",
                "singer": "薛之谦",
                "cover": "img/song/903.jpg",
                "url": "audio/903.mp3"
            },
            {
                "sid": 12,
                "title": "这就是爱",
                "singer": "张杰",
                "cover": "img/song/905.jpg",
                "url": "audio/905.mp3"
            }
        ]
        // 2. 获取搜索结果
        var songList = songs.filter(function (item) {
            // includes方法 判断是否包含指定字符串
            return item.title.includes(searchStr) || item.singer.includes(searchStr) 
        })
        console.log(songList)
        // 3. 生成html元素
        var songListel = document.querySelector('.box')
        for (var song of songList) {
            console.log(song)
            var divel = document.createElement('div')
            divel.className = 'item'
            divel.innerHTML = `
				<div class="info">
					<div class="title">${song.title}</div>
					<div class="ps">
						<span>原创</span>
						<span>翻唱-${song.singer}</span>
					</div>
				</div>
				<img class="play" src="img/youtube.png" alt="" onclick="goToSong(${song.sid})">
				<i class="fa fa-ellipsis-v"></i>
				`
            songListel.appendChild(divel)
        }
        var goBack = function () {
			history.back()
		}
        
        var goToSong = function (sid) {
			window.location.href = './song-info.html?sid=' + sid
		}
        
    </script>
</body>

</html>